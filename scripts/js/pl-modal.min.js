var pl;!function(t){var e=function(){function t(){this._handlers=[],this._scope=this||window}return t.prototype.add=function(t){t&&this._handlers.push(t)},t.prototype.fire=function(){var t=this,e=arguments;this._handlers.forEach(function(n){n.apply(t._scope,e)})},t.prototype.remove=function(t){this._handlers=this._handlers.filter(function(e){if(e!=t)return e})},t}();t.Event=e}(pl||(pl={})),function(t){var e=function(){function e(t){this._isOpen=!1;var n={effectName:"",avoidClose:!1};this._settings=e.extendsDefaults(n,t||{}),this._transitionend=e.transitionSelect(),this.buildOut(),this.initializeEvents()}return e.transitionSelect=function(){var t=document.createElement("div"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n]},e.extendsDefaults=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},e.prototype.buildOut=function(){this._overlay=document.createElement("div"),this._overlay.className="pl-modal-overlay",this._modal=document.createElement("div"),this._modal.className="pl-modal "+this._settings.effectName,this._content=document.createElement("div"),this._content.className="pl-modal-content",this._modal.appendChild(this._content),this._settings.avoidClose||(this._closeButton=document.createElement("div"),this._closeButton.className="pl-modal-close-button",this._content.appendChild(this._closeButton))},e.prototype.initializeEvents=function(){var t=this;if(!this._settings.avoidClose){document.addEventListener("keydown",function(e){27==e.keyCode&&t.close()},!1),this._closeButton.addEventListener("click",function(e){t.close()},!1)}this.toggleTransitionend=this.toggleTransitionend.bind(this),this._content.addEventListener(this._transitionend,this.toggleTransitionend,!1)},e.prototype.onOpened=function(){this._opened&&this._opened.fire()},e.prototype.onClosed=function(){this._closed&&this._closed.fire(),this.removeFromDom()},e.prototype.removeFromDom=function(){var t=this._overlay,e=this._modal;t.parentNode.removeChild(t),e.parentNode.removeChild(e)},e.prototype.toggleTransitionend=function(t){var e=this,n=this._content,o=this._isOpen?this.onClosed:this.onOpened;n.removeEventListener(this._transitionend,this.toggleTransitionend),this._isOpen=!this._isOpen,o.call(this),setTimeout(function(){n.addEventListener(e._transitionend,e.toggleTransitionend,!1)},50)},e.prototype.changeEffect=function(t){this._settings.effectName=t,this._modal.className="pl-modal "+this._settings.effectName},e.prototype.close=function(){if(this._isOpen){var t=document.body,e=this._overlay,n=this._modal;t.className=t.className.replace(/\s?\bno-scroll\b/g,""),e.className=e.className.replace(/\s?\bpl-modal-open\b/g,""),n.className=n.className.replace(/\s?\bpl-modal-open\b/g,"")}},Object.defineProperty(e.prototype,"closed",{get:function(){return this._closed||(this._closed=new t.Event),this._closed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened||(this._opened=new t.Event),this._opened},enumerable:!0,configurable:!0}),e.prototype.open=function(t){if(!this._isOpen){var e=document.body,n=this._overlay,o=this._modal,i=this._content;this.setContent(t),e.appendChild(n),e.appendChild(o),e.className+="no-scroll",window.getComputedStyle(n).backgroundColor,window.getComputedStyle(o).opacity,window.getComputedStyle(i).opacity,n.className+=" pl-modal-open",o.className+=" pl-modal-open"}},e.prototype.setContent=function(t){void 0===t&&(t="");var e=this._content;e.innerHTML="",this._settings.avoidClose||e.appendChild(this._closeButton),"string"==typeof t?e.appendChild(document.createTextNode(t)):e.appendChild(t)},e}();t.Modal=e}(pl||(pl={}));